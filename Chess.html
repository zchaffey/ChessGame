<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Chess Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 20px;
      background-color: #f0f0f0;
    }

    h1 {
      margin-bottom: 10px;
    }

    #turn {
      margin-bottom: 10px;
      font-weight: bold;
    }

    #chessboard {
      display: grid;
      grid-template-columns: repeat(8, 60px);
      grid-template-rows: repeat(8, 60px);
      border: 3px solid #333;
    }

    .square {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      cursor: pointer;
    }

    .white {
      background-color: #eee;
    }

    .black {
      background-color: #666;
      color: white;
    }

    .highlight {
      background-color: yellow !important;
    }

    #resetBtn {
      margin-top: 15px;
      padding: 8px 16px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>Chess Game</h1>
  <div id="turn">Turn: White</div>
  <div id="chessboard"></div>
  <button id="resetBtn">Restart</button>

  <script>
    const board = document.getElementById("chessboard");
    const turnDisplay = document.getElementById("turn");
    const resetBtn = document.getElementById("resetBtn");

    const initialBoard = [
      ["♜","♞","♝","♛","♚","♝","♞","♜"],
      ["♟","♟","♟","♟","♟","♟","♟","♟"],
      ["","","","","","","",""],
      ["","","","","","","",""],
      ["","","","","","","",""],
      ["","","","","","","",""],
      ["♙","♙","♙","♙","♙","♙","♙","♙"],
      ["♖","♘","♗","♕","♔","♗","♘","♖"]
    ];

    let boardState = JSON.parse(JSON.stringify(initialBoard));
    let selected = null;
    let currentTurn = "white";

    const isWhite = piece => "♙♖♘♗♕♔".includes(piece);
    const isBlack = piece => "♟♜♞♝♛♚".includes(piece);

    function renderBoard() {
      board.innerHTML = "";
      for (let r = 0; r < 8; r++) {
        for (let c = 0; c < 8; c++) {
          const square = document.createElement("div");
          square.className = "square " + ((r + c) % 2 === 0 ? "white" : "black");
          square.dataset.row = r;
          square.dataset.col = c;
          square.textContent = boardState[r][c];
          square.addEventListener("click", handleClick);
          board.appendChild(square);
        }
      }
    }

    function handleClick(e) {
      const row = +e.currentTarget.dataset.row;
      const col = +e.currentTarget.dataset.col;
      const piece = boardState[row][col];

      // Select a piece
      if (!selected) {
        if ((currentTurn === "white" && isWhite(piece)) ||
            (currentTurn === "black" && isBlack(piece))) {
          selected = { row, col };
          e.currentTarget.classList.add("highlight");
        }
        return;
      }

      // Move piece
      const from = selected;
      const to = { row, col };
      const fromPiece = boardState[from.row][from.col];
      const toPiece = boardState[to.row][to.col];

      // Prevent capturing own piece
      if ((isWhite(fromPiece) && isWhite(toPiece)) || (isBlack(fromPiece) && isBlack(toPiece))) {
        resetSelection();
        return;
      }

      // Basic movement validation (pawn/rook/knight only)
      if (isValidMove(from, to, fromPiece)) {
        boardState[to.row][to.col] = fromPiece;
        boardState[from.row][from.col] = "";
        currentTurn = currentTurn === "white" ? "black" : "white";
        turnDisplay.textContent = `Turn: ${currentTurn.charAt(0).toUpperCase() + currentTurn.slice(1)}`;
      }

      resetSelection();
      renderBoard();
    }

    function isValidMove(from, to, piece) {
      const dr = to.row - from.row;
      const dc = to.col - from.col;

      switch (piece) {
        case "♙": // White pawn
          return dr === -1 && dc === 0 && boardState[to.row][to.col] === "";
        case "♟": // Black pawn
          return dr === 1 && dc === 0 && boardState[to.row][to.col] === "";
        case "♖":
        case "♜": // Rook
          return (dr === 0 || dc === 0) && clearPath(from, to);
        case "♘":
        case "♞": // Knight
          return (Math.abs(dr) === 2 && Math.abs(dc) === 1) ||
                 (Math.abs(dr) === 1 && Math.abs(dc) === 2);
        default:
          return true; // Simplified: allow all other moves
      }
    }

    function clearPath(from, to) {
      let dr = Math.sign(to.row - from.row);
      let dc = Math.sign(to.col - from.col);
      let r = from.row + dr, c = from.col + dc;

      while (r !== to.row || c !== to.col) {
        if (boardState[r][c] !== "") return false;
        r += dr;
        c += dc;
      }

      return true;
    }

    function resetSelection() {
      selected = null;
      document.querySelectorAll(".square").forEach(s => s.classList.remove("highlight"));
    }

    function resetGame() {
      boardState = JSON.parse(JSON.stringify(initialBoard));
      currentTurn = "white";
      turnDisplay.textContent = "Turn: White";
      renderBoard();
    }

    resetBtn.addEventListener("click", resetGame);

    renderBoard();
  </script>
</body>
</html>
